---
title: "Rust Grpc Server"
excerpt: "Building a Rust Grpc Server Step By Step"
tags:
  - Tutorial
toc: true
---

## GRPC vs Thrift vs JSON vs SOAP

Once I was introduced to [gRPC](https://grpc.io/) and [Thrift](https://github.com/facebook/fbthrift), it is hard to go back to using the more transitional JSON-based REST API or [SOAP](https://en.wikipedia.org/wiki/SOAP) API.

The two RPC framework, gRPC and Thrift, have many similarities. The former originates from Google while the latter originate from Facebook. Both of them are easy to use, have great supports for a wide range of programming languages, and are both known to be performant.

The most valuable feature is code generation in multiple languages and also server side reflection. These make the API essentially type-safe. With server side reflection, we can also explore the schema definition of the API without having to read and understand the implementation.


Today, we'll look into gRPC since it has gain a lot more attention in recent years comparing to Apache Thrift.

![](/assets/images/grpc-vs-thrift.png)
*Comparison between GRPC (blue) with Apache Thrift (red) on [Google Trends](https://trends.google.com/trends/explore?date=all&q=GRPC,%2Fm%2F02qd4d1)*

## Why Not GraphQL?

[GraphQL](https://github.com/graphql/graphql-spec) is another framework initiated from Facebook. It shares many similarities with the two RPC frameworks above. However, one of the biggest difference is that it is designed to a "query language". One of the biggest pain points in mobile API development is that users never upgrade their app. Because we want to maintain backward compatibility, we either have to keep old unused fields in the API and create multiple version of the API. GraphQL solves this problem by allowing clients to include required fields and properties in the requests.

However, every has trade-offs. Because of the extra flexibility with GraphQL, it also make it much harder to cache requests. Apart from that, it is also more complicated to setup comparing to gRPC or Thrift.

Therefore, if we are building APIs for backend services, or web frontend, I think it is an overkill to use GraphQL.

## Rust

Every one says Rust has a steep learning curve. But yet, it remains the most loved programming language 3 years in a row based on Stack Overflow survey.

One thing might be because the community that are passionate about Rust are from C, C++ world? If that's the case, Rust is not harder to learn in comparison.

But regardless, the type-safety, elegant memory management, and wide community support, performance, all make Rust a very attractive and promising programming language for backend service developments.

## ...


```
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

See https://www.rust-lang.org/tools/install for more details.

If you've previously installed Rust, we can [update it via](https://stackoverflow.com/a/51687419/1035008):

```
$ rustup update stable
```

Let's double check the installed version of `rustc` (the Rust compiler) and `cargo` (the Rust package manager):

```
$ rustc --version
rustc 1.60.0 (7737e0b5c 2022-04-04)
$ cargo --version
cargo 1.60.0 (d1fd9fe2c 2022-03-01)
```

We also need `cmake` to compile `prost-build`. Let's [install that view brew](https://stackoverflow.com/a/33628202/1035008).

```
$ brew install cmake
```

Let's double check to make sure the cmake is installed properly:

```
$ cmake --version
cmake version 3.23.1
```

# Testing The GRPC Server
```
brew install --cask bloomrpc
```

```
cargo run --bin client
```



# Reference

* https://github.com/hyperium/tonic/blob/master/examples/helloworld-tutorial.md
* https://medium.com/geekculture/quick-start-to-grpc-using-rust-c655785fc6f4
* https://github.com/bloomrpc/bloomrpc
